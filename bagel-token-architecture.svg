<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">Bagel Token & Merkle Airdrop Architecture</text>
  
  <!-- Contract Boxes -->
  <rect x="100" y="100" width="200" height="120" rx="10" ry="10" fill="#FFE0B2" stroke="#FF9800" stroke-width="2"/>
  <text x="200" y="130" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">BagelToken</text>
  <text x="200" y="155" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">ERC20, Ownable</text>
  <text x="200" y="175" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">- mint()</text>
  <text x="200" y="195" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">- transfer()</text>
  
  <rect x="500" y="100" width="200" height="120" rx="10" ry="10" fill="#BBDEFB" stroke="#2196F3" stroke-width="2"/>
  <text x="600" y="130" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">MerkleAirdrop</text>
  <text x="600" y="155" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">EIP712</text>
  <text x="600" y="175" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">- claim()</text>
  <text x="600" y="195" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">- claimWithSignature()</text>
  
  <!-- Arrow between contracts -->
  <line x1="300" y1="160" x2="500" y2="160" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="150" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">supplies tokens</text>
  
  <!-- Off-chain Components -->
  <rect x="100" y="300" width="200" height="100" rx="10" ry="10" fill="#E1BEE7" stroke="#9C27B0" stroke-width="2" opacity="0.8"/>
  <text x="200" y="330" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Airdrop List</text>
  <text x="200" y="355" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">address â†’ amount</text>
  <text x="200" y="375" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">JSON or CSV data</text>
  
  <rect x="100" y="450" width="200" height="100" rx="10" ry="10" fill="#E1BEE7" stroke="#9C27B0" stroke-width="2" opacity="0.8"/>
  <text x="200" y="480" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Merkle Tree Generator</text>
  <text x="200" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Off-chain script</text>
  <text x="200" y="525" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">keccak256 hashing</text>
  
  <!-- User Box -->
  <rect x="500" y="300" width="200" height="100" rx="10" ry="10" fill="#C8E6C9" stroke="#4CAF50" stroke-width="2"/>
  <text x="600" y="330" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Eligible User</text>
  <text x="600" y="355" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">- Gets Merkle proof</text>
  <text x="600" y="375" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">- Signs message (optional)</text>
  
  <!-- Claim Flow Box -->
  <rect x="500" y="450" width="200" height="100" rx="10" ry="10" fill="#FFECB3" stroke="#FFC107" stroke-width="2"/>
  <text x="600" y="480" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Claim Process</text>
  <text x="600" y="505" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">1. Verify Merkle proof</text>
  <text x="600" y="525" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">2. Verify signature (if any)</text>
  
  <!-- Arrows for offchain flow -->
  <line x1="200" y1="400" x2="200" y2="450" stroke="#9C27B0" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="300" y1="500" x2="500" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="490" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Merkle Root & Proofs</text>
  
  <!-- Arrow from User to MerkleAirdrop -->
  <line x1="600" y1="400" x2="600" y2="220" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="620" y="310" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Claims tokens</text>
  
  <!-- Arrow from MerkleAirdrop to User -->
  <line x1="575" y1="220" x2="575" y2="300" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="540" y="260" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">Transfers tokens</text>
  
  <!-- Arrowhead marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
</svg>
